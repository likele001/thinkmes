<div class="card">
    <div class="card-header">
        <h5>请选择订单</h5>
    </div>
    <div class="card-body">
        <div id="toolbar" class="toolbar">
            <div class="form-inline">
                <div class="form-group">
                    <label>搜索订单:</label>
                    <input type="text" id="search-order" class="form-control" placeholder="订单号或客户名称">
                </div>
                <button type="button" class="btn btn-primary btn-search" id="btn-search">搜索</button>
            </div>
        </div>
        <table id="table" class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>订单ID</th>
                    <th>订单号</th>
                    <th>客户名称</th>
                    <th>订单状态</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {volist name="orders" id="order"}
                <tr>
                    <td>{$order.id}</td>
                    <td>{$order.order_no}</td>
                    <td>{$order.customer_name}</td>
                    <td>
                        {if $order.shipment_status == 0}
                            <span class="badge badge-warning">未发货</span>
                        {elseif $order.shipment_status == 1}
                            <span class="badge badge-info">已发货</span>
                        {else}
                            <span class="badge badge-success">已签收</span>
                        {/if}
                    </td>
                    <td>
                        <a href="javascript:selectOrder({$order.id})" class="btn btn-xs btn-success">创建发货</a>
                    </td>
                </tr>
                {/volist}
            </tbody>
        </table>
        {if empty($orders)}
        <div class="alert alert-info" role="alert">
            <p>暂无可创建发货的订单</p>
        </div>
        {/if}
    </div>
</div>

<script>
function selectOrder(orderId) {
    window.location.href = "{:url('mes.Shipment/add')}?order_id=" + orderId;
}

$(function() {
    $('#btn-search').click(function() {
        var keyword = $('#search-order').val().trim();
        if (keyword) {
            // 这里可以添加客户端搜索或服务器端搜索
            var items = [];
            $('#table tbody tr').each(function() {
                var text = $(this).text();
                if (text.indexOf(keyword) !== -1) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        } else {
            $('#table tbody tr').show();
        }
    });
});
</script>
